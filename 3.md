# Часть 1
====> SERVER <====
```
sudo apt update
sudo apt install samba
sudo mkdir -p /samba/{public,groups,users}
sudo mkdir /samba/users/{user1,user2}
sudo mkdir /samba/groups/group1
sudo chmod -R 0777 /samba/public
sudo chmod -R 0755 /samba/groups
sudo chmod -R 0755 /samba/users
sudo useradd -M user1
sudo useradd -M user2
sudo groupadd group1
sudo usermod -aG group1 user1
sudo usermod -aG group1 user2
sudo smbpasswd -a user1
sudo smbpasswd -a user2
```

```
sudo nano /etc/samba/smb.conf
[global]
   workgroup = WORKGROUP
   server string = Samba Server
   netbios name = SAMBASERVER
   security = user
   map to guest = bad user
   dns proxy = no
   interfaces = 10.129.0.0/24
   bind interfaces only = yes
   log file = /var/log/samba/log.%m
   max log size = 1000
   logging = file

[public]
   path = /samba/public
   browsable = yes
   writable = yes
   guest ok = yes
   read only = no

[users]
   path = /samba/users
   browsable = yes
   writable = yes
   guest ok = no
   valid users = @users
   create mask = 0700
   directory mask = 0700

[group1]
   path = /samba/groups/group1
   browsable = yes
   writable = yes
   guest ok = no
   valid users = @group1
   create mask = 0770
   directory mask = 0770

[user1]
   path = /samba/users/user1
   browsable = no
   writable = yes
   guest ok = no
   valid users = user1
   create mask = 0700
   directory mask = 0700

[user2]
   path = /samba/users/user2
   browsable = no
   writable = yes
   guest ok = no
   valid users = user2
   create mask = 0700
   directory mask = 0700

sudo systemctl restart smbd
```
====> CLIENT <====
```
sudo apt update
sudo apt install cifs-utils
sudo mkdir -p /mnt/samba/{public,group1,user1,user2}
```

```
sudo nano /root/.smbcredentials
username=user1
password=password_for_user1
```

```
sudo vim /etc/fstab
# SMB servers
//10.129.0.17/public /mnt/samba/public cifs vers=3.1.1,guest,uid=1000,gid=1000 0 0
//10.129.0.17/group1 /mnt/samba/group1 cifs vers=3.1.1,credentials=/root/.smbcredentials,uid=1001,gid=1003 0 0
//10.129.0.17/user1 /mnt/samba/user1 cifs vers=3.1.1,credentials=/root/.smbcredentials,uid=1001,gid=1003 0 0
//10.129.0.17/user2 /mnt/samba/user2 cifs credentials=/root/.smbcredentials,uid=1000,gid=1000 0 0
```

# Часть 2
